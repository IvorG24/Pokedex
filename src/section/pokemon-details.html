<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokémon Details</title>
  <style>
    /* Basic styling for Pokémon details */
    
    body {
  margin: 0;
  padding: 0;
  position: relative; /* Add positioning context */
}

  body {
  background: linear-gradient(to bottom, rgba(228, 46, 5, 0.97), #f4f4f400);
  position: relative; /* Ensure the z-index works */
  font-family: 'Press Start 2P', cursive;
  z-index: 10;
}

body.fade-in {
  animation: fadeInContent 4s forwards; /* Animation to fade in the content */
}

@keyframes fadeInContent {
  from {
    opacity: 1;
  }
  to {
    opacity: 1;
  }
}

body::before {
  content: "";
  position: fixed; /* Keeps the pokeball fixed in position */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('../assets/circle.gif') center;
  background-size: cover;
  opacity: 0.5;
  z-index: -1;
}


header {
  color: white;
  text-align: center;
  padding: 14px 0;
}

.pokemon-details {
  text-align: center;
  margin: 20px;
}


h2 {
  color: #333; /* Set a dark color for Pokémon names */
}

p {
  color: #555; /* Set a slightly lighter color for descriptions */
}

/* Base styling for abilities and moves */
.abilities, .moves {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border: 3px solid #00ff00; /* Neon green border for an arcade feel */
  border-radius: 10px;
  padding: 20px;
  margin-top: 10px;
  background: #000; /* Dark background typical of arcade screens */
  box-shadow: 0 0 15px #00ff00; /* Glowing effect */ /* Pixelated font for the retro arcade look */
  color: #ffffff; /* Light text color for contrast */
}

/* Section headers */

/* Style for lists */
ul {
  list-style: none;
  padding: 20px;
  display: flex;
}

/* Individual items in abilities and moves */
.abilities div, .moves div {
  border: 1px solid rgb(255, 187, 0); /* Matching neon green borders */
  border-radius: 5px;
  padding: 10px;
  margin: 10px 0;
  background: rgba(255, 255, 255, 0.1); /* Slightly transparent background */
  box-shadow: 0 0 5px rgb(5, 233, 5); /* Add a subtle glow */
  color: #ffffff; /* Ensure text is readable */
 
}

/* Additional styling for moves */
.moves {
  border: 2px solid #ff0000; /* Different color border for differentiation */
  box-shadow: 0 0 15px #ff0000; /* Glowing effect in a different color */
}

.pokemontitle{
  width: 15%;
}

  </style>
</head>
<body class="hide-content">

  <header class="flex flex-row">
    <img class="pokemontitle" src="../assets/pokemonggo.png" alt="">
  </header>

  <div class="pokemon-details" id="pokemonDetails"></div>
  <script>
    async function fetchData(url) {
      try {
        const response = await fetch(url);
        const data = await response.json();
        return data;
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
  setTimeout(function() {
    document.body.classList.remove('hide-content'); // Remove the class that hides content
    document.body.classList.add('fade-in'); // Add class to start fade-in animation
  }, 5000); // Replace 5000 with the duration of your GIF in milliseconds
});

    function displayPokemonDetails(pokemon, description, abilities, moves) {
      const pokemonDetailsDiv = document.getElementById('pokemonDetails');
      const name = document.createElement('h2');
      name.textContent = pokemon.name;
      name.style.textTransform = 'capitalize'
      name.style.fontSize ='30px'
      name.style.color ='#f0e11f'
      pokemonDetailsDiv.appendChild(name);
      const image = document.createElement('img');
      image.src = pokemon.sprites.front_default;
      image.alt = pokemon.name;
      image.style.width = '25%'
      image.style.display = 'flex justify-content-center align-items-center'
      pokemonDetailsDiv.appendChild(image);
      const descriptionParagraph = document.createElement('p');
      descriptionParagraph.textContent = description;
      descriptionParagraph.style.fontSize = '20px'
      descriptionParagraph.style.color = '#f0e11f'
      pokemonDetailsDiv.appendChild(descriptionParagraph);

      // Display abilities
      const abilitiesDiv = document.createElement('div');
      abilitiesDiv.classList.add('abilities');
      const abilitiesHeader = document.createElement('h3');
      abilitiesHeader.textContent = 'Abilities:';
      abilitiesDiv.appendChild(abilitiesHeader);
      const abilitiesList = document.createElement('ul');
      abilities.forEach(ability => {
        const abilityItem = document.createElement('div');
        abilityItem.textContent = ability;
        abilitiesList.appendChild(abilityItem);
      });
      abilitiesDiv.appendChild(abilitiesList);
      pokemonDetailsDiv.appendChild(abilitiesDiv);

      // Display moves
      const movesDiv = document.createElement('div');
      movesDiv.classList.add('moves'); // Add the 'moves' class
      const movesHeader = document.createElement('h3');
      movesHeader.textContent = 'Moves:';
      movesDiv.appendChild(movesHeader);
      const movesList = document.createElement('div');
      moves.forEach(move => {
        const moveItem = document.createElement('div');
        moveItem.textContent = move;
        movesList.appendChild(moveItem);
      });
      movesDiv.appendChild(movesList);
      pokemonDetailsDiv.appendChild(movesDiv);


      // Add more details as needed
    }

    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    async function loadPokemonDetails(pokemonId) {
      const apiUrl = `https://pokeapi.co/api/v2/pokemon/${pokemonId}/`;
      const pokemon = await fetchData(apiUrl);
      return pokemon;
    }

    async function loadPokemonDescription(pokemonId) {
      const speciesUrl = `https://pokeapi.co/api/v2/pokemon-species/${pokemonId}/`;
      const speciesData = await fetchData(speciesUrl);
      return speciesData.flavor_text_entries.find(entry => entry.language.name === 'en').flavor_text;
    }

    async function loadPokemonAbilities(pokemonId) {
      const apiUrl = `https://pokeapi.co/api/v2/pokemon/${pokemonId}/`;
      const pokemonData = await fetchData(apiUrl);
      const abilities = pokemonData.abilities.map(ability => ability.ability.name);
      return abilities;
    }

    async function loadPokemonMoves(pokemonId) {
      const apiUrl = `https://pokeapi.co/api/v2/pokemon/${pokemonId}/`;
      const pokemonData = await fetchData(apiUrl);
      const moves = pokemonData.moves.slice(0, 5).map(move => move.move.name); // Displaying the first 5 moves for each Pokémon
      return moves;
    }
    
    // Load Pokémon details, description, abilities, and moves based on the ID from the URL parameter
    const pokemonId = getQueryParam('id');
    if (pokemonId) {
      Promise.all([
        loadPokemonDetails(pokemonId),
        loadPokemonDescription(pokemonId),
        loadPokemonAbilities(pokemonId),
        loadPokemonMoves(pokemonId),
      ])
        .then(([pokemonDetails, description, abilities, moves]) =>
          displayPokemonDetails(pokemonDetails, description, abilities, moves)
        )
        .catch(error => console.error('Error loading Pokémon details:', error));
    } else {
      console.error('Pokemon ID not found in the URL.');
    }
  </script>

</body>
</html>
